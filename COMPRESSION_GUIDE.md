# üóúÔ∏è –ú–µ—Ö–∞–Ω–∏–∑–º –ö–æ–º–ø—Ä–µ—Å—Å–∏–∏ –ò—Å—Ç–æ—Ä–∏–∏ –ß–∞—Ç–∞

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∂–∞—Ç–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –¢—Ä–∏–≥–≥–µ—Ä —Å–∂–∞—Ç–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–µ 10 –Ω–µ—Å–∂–∞—Ç—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π**
- –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—Å–∂–∞—Ç—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–∂–∞—Ç–æ–µ summary

### –ü—Ä–æ—Ü–µ—Å—Å —Å–∂–∞—Ç–∏—è

1. **–°–±–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π**: –°–∏—Å—Ç–µ–º–∞ –±–µ—Ä–µ—Ç –ø–µ—Ä–≤—ã–µ 10 –Ω–µ—Å–∂–∞—Ç—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
2. **–°–æ–∑–¥–∞–Ω–∏–µ summary**: –ò–∑–≤–ª–µ–∫–∞—é—Ç—Å—è:
   - –ö–ª—é—á–µ–≤—ã–µ —Ç–µ–º—ã –æ–±—Å—É–∂–¥–µ–Ω–∏—è
   - –í–∞–∂–Ω—ã–µ —Ñ–∞–∫—Ç—ã –∏–∑ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –†–µ—à–µ–Ω–∏—è –∏ –≤—ã–≤–æ–¥—ã –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
3. **–ó–∞–º–µ–Ω–∞**: 10 –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞–º–µ–Ω—è—é—Ç—Å—è –æ–¥–Ω–∏–º —Å–∂–∞—Ç—ã–º
4. **–ü–æ–¥—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫**: –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏

### –§–æ—Ä–º–∞—Ç —Å–∂–∞—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

```
[COMPRESSED_HISTORY]
–ü–µ—Ä–∏–æ–¥: —Å–æ–æ–±—â–µ–Ω–∏—è #1-#10
–ö–ª—é—á–µ–≤—ã–µ —Ç–µ–º—ã: [—Ç–µ–º—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é]
–í–∞–∂–Ω—ã–µ —Ñ–∞–∫—Ç—ã:
‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–∫–ª—é—á–µ–≤–æ–π —Ñ–∞–∫—Ç 1]
‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–∫–ª—é—á–µ–≤–æ–π —Ñ–∞–∫—Ç 2]
‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–∫–ª—é—á–µ–≤–æ–π —Ñ–∞–∫—Ç 3]
–†–µ—à–µ–Ω–∏—è/–≤—ã–≤–æ–¥—ã:
‚Ä¢ –û—Ç–≤–µ—Ç: [–∫–ª—é—á–µ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ 1]
‚Ä¢ –û—Ç–≤–µ—Ç: [–∫–ª—é—á–µ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ 2]
‚Ä¢ –û—Ç–≤–µ—Ç: [–∫–ª—é—á–µ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ 3]
–ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è: [–≤–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è AI]
[/COMPRESSED_HISTORY]
```

## –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

### –í —á–∞—Ç–µ
- –°–∂–∞—Ç—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –æ—Å–æ–±—ã–º –¥–∏–∑–∞–π–Ω–æ–º:
  - üóúÔ∏è –ò–∫–æ–Ω–∫–∞ –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏
  - –ñ–µ–ª—Ç–æ-–æ—Ä–∞–Ω–∂–µ–≤–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞
  - –ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è summary
  - –£–∫–∞–∑–∞–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Å–∂–∞—Ç—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å–∂–∞—Ç–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
  - "üóúÔ∏è –ò—Å—Ç–æ—Ä–∏—è —Å–∂–∞—Ç–∞! –¢–æ–∫–µ–Ω—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã."
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è 3 —Å–µ–∫—É–Ω–¥—ã
  - –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç—Å—è –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏

### –ë–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë      –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ö–û–ú–ü–†–ï–°–°–ò–ò          ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë –í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π: [—á–∏—Å–ª–æ]            ‚ïë
‚ïë –í—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–∂–∞—Ç–∏–π: [—á–∏—Å–ª–æ]           ‚ïë
‚ïë –ò—Å—Ö–æ–¥–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤: ~[–æ—Ü–µ–Ω–∫–∞]         ‚ïë
‚ïë –ü–æ—Å–ª–µ —Å–∂–∞—Ç–∏—è: ~[–æ—Ü–µ–Ω–∫–∞]             ‚ïë
‚ïë –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤: ~[—á–∏—Å–ª–æ] ([%])    ‚ïë
‚ïë –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: [HIGH/MED/LOW]  ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

### –ú–µ—Ç—Ä–∏–∫–∏:
- **–í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π** - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏
- **–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–∂–∞—Ç–∏–π** - —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –±—ã–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–ø—Ä–µ—Å—Å–∏—è
- **–ò—Å—Ö–æ–¥–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤** - –ø—Ä–∏–º–µ—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ —Å–∂–∞—Ç–∏—è
- **–ü–æ—Å–ª–µ —Å–∂–∞—Ç–∏—è** - –ø—Ä–∏–º–µ—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ—Å–ª–µ —Å–∂–∞—Ç–∏—è
- **–≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤** - —Å–∫–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω–æ–≤ —Å—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ (–≤ —á–∏—Å–ª–∞—Ö –∏ %)
- **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** - –æ—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ—Å–ª–µ —Å–∂–∞—Ç–∏—è
  - `HIGH` - >70% –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
  - `MEDIUM` - 40-70% –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
  - `LOW` - <40% –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ

## –û—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞:
- **1 —Ç–æ–∫–µ–Ω ‚âà 4 —Å–∏–º–≤–æ–ª–∞** (–¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ/–∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞)
- Summary –±–ª–æ–∫ –æ–±—ã—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç ~100-150 —Ç–æ–∫–µ–Ω–æ–≤
- 10 –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π ‚âà 500-2000 —Ç–æ–∫–µ–Ω–æ–≤
- **–≠–∫–æ–Ω–æ–º–∏—è: –æ–±—ã—á–Ω–æ 60-80%**

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **types/chat.ts** - —Ä–∞—Å—à–∏—Ä–µ–Ω—ã —Ç–∏–ø—ã:
   - `Message` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `isCompressed`, `compressedRange`
   - `CompressionStats` - –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

2. **lib/utils.ts** - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏:
   - `estimateTokens()` - –æ—Ü–µ–Ω–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤
   - `createCompressedSummary()` - —Å–æ–∑–¥–∞–Ω–∏–µ summary
   - `shouldCompress()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∂–∞—Ç–∏—è
   - `compressMessages()` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏
   - `evaluateContextQuality()` - –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

3. **hooks/useChat.ts** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞:
   - –•—Ä–∞–Ω–µ–Ω–∏–µ `compressionStats` –≤ localStorage
   - `useEffect` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏
   - –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–∂–∞—Ç–∏—è

4. **components/chat/ChatMessage.tsx** - –¥–æ–±–∞–≤–ª–µ–Ω:
   - –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–ª—è —Å–∂–∞—Ç—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

5. **components/chat/StatisticsPanel.tsx** - –¥–æ–±–∞–≤–ª–µ–Ω–∞:
   - –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏
   - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

6. **components/chat/ChatContainer.tsx** - –¥–æ–±–∞–≤–ª–µ–Ω–æ:
   - –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏

7. **lib/constants.ts** - –¥–æ–±–∞–≤–ª–µ–Ω:
   - `COMPRESSION_STATS` –∫–ª—é—á –¥–ª—è localStorage

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ù–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥** - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ 10+ —Å–æ–æ–±—â–µ–Ω–∏–π** - —É–≤–∏–¥–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∫–æ–º–ø—Ä–µ—Å—Å–∏—é
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** - –≤ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –±–ª–æ–∫ –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏
4. **–ù–∞–±–ª—é–¥–∞–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** - –ø—Ä–∏ 10-–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –ø–æ—è–≤–∏—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

```
–°–æ–æ–±—â–µ–Ω–∏–µ 1: –ü—Ä–∏–≤–µ—Ç
–°–æ–æ–±—â–µ–Ω–∏–µ 2: –ö–∞–∫ –¥–µ–ª–∞?
...
–°–æ–æ–±—â–µ–Ω–∏–µ 10: [–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø—Ä–µ—Å—Å–∏—è]
‚Üí –°–æ–∑–¥–∞–µ—Ç—Å—è 1 —Å–∂–∞—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ –ø–µ—Ä–≤—ã—Ö 10
‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
‚Üí –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–°–æ–æ–±—â–µ–Ω–∏–µ 11-20: [–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞]
–°–æ–æ–±—â–µ–Ω–∏–µ 20: [–≤—Ç–æ—Ä–∞—è –∫–æ–º–ø—Ä–µ—Å—Å–∏—è]
...
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤** - —Å–Ω–∏–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ 60-80%
‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** - –∫–ª—é—á–µ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è
‚úÖ **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–º
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–π

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞ —Å–∂–∞—Ç–∏—è:

–í `lib/utils.ts` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `shouldCompress()`:
```typescript
export function shouldCompress(messages: Message[]): boolean {
  const uncompressedMessages = messages.filter(m => !m.isCompressed);
  return uncompressedMessages.length >= 10; // –ò–∑–º–µ–Ω–∏—Ç–µ 10 –Ω–∞ –Ω—É–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ summary:

–í `lib/utils.ts` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `createCompressedSummary()` - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —à–∞–±–ª–æ–Ω

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤:

–í `lib/utils.ts` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `estimateTokens()`:
```typescript
export function estimateTokens(text: string): number {
  return Math.ceil(text.length / 4); // –ò–∑–º–µ–Ω–∏—Ç–µ –¥–µ–ª–∏—Ç–µ–ª—å
}
```

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

üöÄ **–í–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏:**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º API –ø–æ–¥—Å—á–µ—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤
- –£—Ä–æ–≤–Ω–∏ —Å–∂–∞—Ç–∏—è (–ª–µ–≥–∫–æ–µ/—Å—Ä–µ–¥–Ω–µ–µ/–∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ)
- –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∂–∞—Ç–∏–µ–º
- –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–æ–π —Å–∂–∞—Ç—ã—Ö –±–ª–æ–∫–æ–≤
- ML-based –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Å–∂–∞—Ç–∏—è

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### Q: –°–∂–∞—Ç–∏–µ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
**A:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å 10+ –Ω–µ—Å–∂–∞—Ç—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### Q: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
**A:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —Å–∂–∞—Ç–∏–µ

### Q: –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç–µ—Ä—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–∂–∞—Ç–∏—è
**A:** –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `createCompressedSummary()` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### Q: –û—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–µ—Ç–æ—á–Ω–∞—è
**A:** –≠—Ç–æ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞. –î–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä

---

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–î–∞—Ç–∞:** 11 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0

